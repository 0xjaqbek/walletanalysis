const rpcURL = 'https://linea.blockpi.network/v1/rpc/public';
const tokenContractAddress = '0xaF96c5708450c9276960592F3B1527f1b1724919';
const stakeContractAddress = '0xd01403FeE3fCa932b18F58228B4A0224c048b148';
const yourContractAbi = [
  {
    "inputs": [],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event",
    "signature": "0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event",
    "signature": "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "allowance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xdd62ed3e"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x095ea7b3"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "stakingContract",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "approveStakingContract",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xe0493121"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x70a08231"
  },
  {
    "inputs": [],
    "name": "claim",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x4e71d92d"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "claimedTokens",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xa960c65f"
  },
  {
    "inputs": [],
    "name": "decimals",
    "outputs": [
      {
        "internalType": "uint8",
        "name": "",
        "type": "uint8"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x313ce567"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "subtractedValue",
        "type": "uint256"
      }
    ],
    "name": "decreaseAllowance",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xa457c2d7"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "addedValue",
        "type": "uint256"
      }
    ],
    "name": "increaseAllowance",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x39509351"
  },
  {
    "inputs": [],
    "name": "maxClaimable",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xf03f80c3"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x06fdde03"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x8da5cb5b"
  },
  {
    "inputs": [],
    "name": "symbol",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x95d89b41"
  },
  {
    "inputs": [],
    "name": "totalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x18160ddd"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "transfer",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xa9059cbb"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x23b872dd"
  }
];
let web3;
let accounts;

async function initWeb3() {
    if (window.ethereum) {
        web3 = new Web3(window.ethereum);
    } else if (window.web3) {
        web3 = new Web3(window.web3.currentProvider);
    } else {
        console.error('No web3 provider detected. Please install MetaMask or another wallet.');
    }
}

async function connectWallet() {
    if (!web3) {
        console.error('Web3 provider not available.');
        alert('Wallet connection failed. Please install MetaMask or another wallet.');
        return;
    }

    try {
        // Request account access
        const accounts = await window.ethereum.enable();
        const addressInput = document.getElementById('addressInput');
        addressInput.value = accounts[0]; // Pre-fill the address input
        addressInput.disabled = true;

        // Check the chain ID
        const chainId = await web3.eth.getChainId();

        if (chainId !== 0xe708) {
            // Display a warning if the chain ID doesn't match the expected one
            document.getElementById('chainWarning').style.display = 'block';
            alert('Wallet connected, but you are on the wrong chain. Please switch to the correct network.');
        } else {
            alert('Wallet connected successfully!');
            showPart(2); // Move to Part 2 after connecting to the correct chain.
        }
    } catch (error) {
        console.error(error);
        alert('Wallet connection failed. Check connected chain.');
    }
}

async function getBalance() {
    try {
        const addressInput = document.getElementById('addressInput');
        const addressToCheck = addressInput.value; // Get the address from the input field

        const tokenContract = new web3.eth.Contract(yourContractAbi, tokenContractAddress); // Create the contract object

        const balance = await tokenContract.methods.balanceOf(addressToCheck).call();

        // Convert the balance from wei to ethers (with 18 decimals)
        const adjustedBalance = web3.utils.fromWei(balance, 'ether');

        alert(`Address ${addressToCheck} balance is: ${adjustedBalance} tokens`);
    } catch (error) {
        console.error(error);
        alert(`Error while checking the balance: ${error.message}`);
    }
}

async function claimToken() {
    try {
        const contract = new web3.eth.Contract(yourContractAbi, tokenContractAddress);

        const accounts = await web3.eth.getAccounts();
        await contract.methods.claim().send({ from: accounts[0] });
        alert('Token claimed successfully!');
    } catch (error) {
        console.error(error);
        alert('Error while claiming the token.');
    }
}

async function approveContract() {
    try {
        const inputAmount = document.getElementById('approvalAmount').value;

        // Ensure the input is a valid number
        if (isNaN(inputAmount) || inputAmount <= 0) {
            alert('Please enter a valid positive number for approval.');
            return;
        }

        // Convert the input to a decimal number
        const amountInTokens = parseFloat(inputAmount);

        // Convert the number to hexadecimal representation
        const amountHex = '0x' + (amountInTokens * 10 ** 18).toString(16); // Convert to wei

        const tokenContract = new web3.eth.Contract(yourContractAbi, tokenContractAddress);
        const accounts = await web3.eth.getAccounts();

        // Perform the approval
        await tokenContract.methods.approve(stakeContractAddress, amountHex).send({ from: accounts[0] });
        alert(`Approved ${inputAmount} tokens for contract ${stakeContractAddress}`);
        showPart(3);
    } catch (error) {
        console.error(error);
        alert('Error while approving the contract.');
    }
}

const stakeContractAbi = [
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_tokenAddress",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "burner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "amountBurned",
        "type": "uint256"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "burnOrder",
        "type": "uint256"
      }
    ],
    "name": "TokenBurned",
    "type": "event",
    "signature": "0xde3ca466246b0da455138dbea78dacd91d3c40dc98d5846ff0193bf67c24b0e7"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "staker",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "amountStaked",
        "type": "uint256"
      }
    ],
    "name": "TokenStaked",
    "type": "event",
    "signature": "0x1fdab8a8457aaf782e4b6217d6ffa6f5006eda7e50922dd092b2e1524275d774"
  },
  {
    "inputs": [],
    "name": "burnAddress",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x70d5ae05"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountToBurn",
        "type": "uint256"
      }
    ],
    "name": "burnStakedToken",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xdab483b7"
  },
  {
    "inputs": [],
    "name": "decimals",
    "outputs": [
      {
        "internalType": "uint8",
        "name": "",
        "type": "uint8"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x313ce567"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_address",
        "type": "address"
      }
    ],
    "name": "getLastBurnOrder",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x4d86a5f2"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "lastBurnOrder",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xf9a3032f"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountToStake",
        "type": "uint256"
      }
    ],
    "name": "stake",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xa694fc3a"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "stakedTokens",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xa5b39cfb"
  },
  {
    "inputs": [],
    "name": "token",
    "outputs": [
      {
        "internalType": "contract IERC20",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xfc0c546a"
  },
  {
    "inputs": [],
    "name": "totalBurns",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x694ca01d"
  }
];



async function stakeTokens() {
  try {
    const inputAmount = document.getElementById('stakeAmount').value;

    // Ensure the input is a valid number
    if (isNaN(inputAmount) || inputAmount <= 0) {
      alert('Please enter a valid positive number for staking.');
      return;
    }

    // Convert the input to a decimal number
    const amountToStake = parseFloat(inputAmount);

    // Convert the number to wei
    const amountInWei = web3.utils.toWei(amountToStake.toString());

    const contract = new web3.eth.Contract(stakeContractAbi, stakeContractAddress);
    const accounts = await web3.eth.getAccounts();

    // Perform the staking
    await contract.methods.stake(amountInWei).send({ from: accounts[0] });
    alert(`Staked ${inputAmount} tokens successfully!`);
        showPart(4);
    // Hide the stake part and show the burn part


  } catch (error) {
    console.error(error);
    alert('Error while staking tokens.');
  }
}

async function burnStakedTokens() {
  try {
    const inputAmount = document.getElementById('burnAmount').value;

    // Ensure the input is a valid number
    if (isNaN(inputAmount) || inputAmount <= 0) {
      alert('Please enter a valid positive number for burning.');
      return;
    }

    // Convert the input to a decimal number
    const amountToBurn = parseFloat(inputAmount);

    const contract = new web3.eth.Contract(stakeContractAbi, stakeContractAddress);
    const accounts = await web3.eth.getAccounts();

    // Perform the burning of staked tokens
    await contract.methods.burnStakedToken(web3.utils.toWei(amountToBurn.toString())).send({ from: accounts[0] });
    alert(`Burned ${inputAmount} staked tokens successfully!`);

    // Move to Part 4 after a successful burn
        showPart(5);
  } catch (error) {
    console.error(error);
    alert('Error while burning staked tokens.');
  }
}
document.getElementById('mintButton').disabled = true;
        // Add an event listener to the "Get ID" button
        document.getElementById('getIdButton').addEventListener('click', async () => {
            try {
                if (!web3) {
                    console.error('Web3 provider not available.');
                    alert('Web3 provider not available. Make sure you have MetaMask or another compatible wallet installed.');
                    return;
                }

                // Request the user's account
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });

                const contract = new web3.eth.Contract(stakeContractAbi, stakeContractAddress);

                // Call the getLastBurnOrder function to retrieve the number
                const address = accounts[0]; // You can also use a specific address if needed
                const lastBurnOrder = await contract.methods.getLastBurnOrder(address).call();

                // Display the retrieved number
                document.getElementById('displayedNumber').textContent = lastBurnOrder;
        document.getElementById('mintButton').disabled = false;

            } catch (error) {
                console.error('Error retrieving last burn order:', error);
                alert('Error retrieving last burn order. Please try again.');
            }
        });

const nftContractAddress = '0xE0F920b90d972100Ec24686c775D0B4e5544f9Ad';
const nftContractAbi = [
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "symbol",
        "type": "string"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "approved",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event",
    "signature": "0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "operator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }
    ],
    "name": "ApprovalForAll",
    "type": "event",
    "signature": "0x17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_fromTokenId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_toTokenId",
        "type": "uint256"
      }
    ],
    "name": "BatchMetadataUpdate",
    "type": "event",
    "signature": "0x6bd5c950a8d8df17f772f5af37cb3655737899cbf903264b9795592da439661c"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_tokenId",
        "type": "uint256"
      }
    ],
    "name": "MetadataUpdate",
    "type": "event",
    "signature": "0xf8e1a15aba9398e019f0b49df1a4fde98ee17ae345cb5f6b5e2c27f5033e8ce7"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event",
    "signature": "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"
  },
  {
    "inputs": [],
    "name": "TOKEN_URI",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x78ce9035"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x095ea7b3"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x70a08231"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "getApproved",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x081812fc"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }
    ],
    "name": "isApprovedForAll",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xe985e9c5"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "mintNFT",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x92642744"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x06fdde03"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "ownerOf",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x6352211e"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "safeTransferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x42842e0e"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "data",
        "type": "bytes"
      }
    ],
    "name": "safeTransferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xb88d4fde"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }
    ],
    "name": "setApprovalForAll",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0xa22cb465"
  },
  {
    "inputs": [
      {
        "internalType": "bytes4",
        "name": "interfaceId",
        "type": "bytes4"
      }
    ],
    "name": "supportsInterface",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x01ffc9a7"
  },
  {
    "inputs": [],
    "name": "symbol",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0x95d89b41"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "tokenURI",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function",
    "constant": true,
    "signature": "0xc87b56dd"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function",
    "signature": "0x23b872dd"
  }
];

        // Add an event listener to the "Mint NFT" button
        document.getElementById('mintButton').addEventListener('click', async () => {
            try {
                if (!web3) {
                    console.error('Web3 provider not available.');
                    alert('Web3 provider not available. Make sure you have MetaMask or another compatible wallet installed.');
                    return;
                }

                // Get the displayed number and use it as the NFT ID
                const tokenId = document.getElementById('displayedNumber').textContent;

                if (!tokenId) {
                    alert('No ID to mint NFT. Please click "Get ID" first.');
                    return;
                }

                // Create a contract instance for the NFT contract
                const nftContract = new web3.eth.Contract(nftContractAbi, nftContractAddress);

const accounts = await web3.eth.getAccounts();

                // Mint the NFT using the retrieved ID (lastBurnOrder)
                await nftContract.methods.mintNFT(tokenId).send({ from: accounts[0] });

                alert(`NFT with ID ${tokenId} minted successfully!`);
            } catch (error) {
                console.error('Error minting NFT:', error);
                alert('Error minting NFT. Please try again.');
            }
        });




function showPart(partNumber) {
  for (let i = 1; i <= 5; i++) {
    document.querySelector(`.part${i}`).classList.remove('visible');
  }

  document.querySelector(`.part${partNumber}`).classList.add('visible');
}

initWeb3();
